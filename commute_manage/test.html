<!doctype html>
<link rel="stylesheet" href="top_bar.css">

<style>
  #file_up{
    text-align:center;
  }

  #file_down{
    text-align:center;
  }
</style>

<html lang="en">
  <header topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0" style="background-color:#F6F6F6">
    <div class="menu">
        <nav class="clearfix">
            <ul class="clearfix">
                <li><a href="main_page.html"><i class="bi bi-house-door"></i> 홈</a></li>
                <li><a href="wage_page.html"><i class="bi bi-cash-coin"></i> 급여 확인</a></li>
                <li><a href=""><i class="bi bi-clipboard"></i> 게시판</a></li>
                <li><a href=""><i class="bi bi-calendar2-week"></i> 스케쥴 확인</a></li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-file-earmark-text"></i> 서류 확인</a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="document01.html">근로 계약서</a></li>
                      <li><a class="dropdown-item" href="document02.html">급여 명세서</a></li>
                    </ul>
                  </li>
            </ul>
            <a id="pull" href="#"></a>
        </nav>
    </div>

</header>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>출퇴근 등록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  </head>
  <body>
    <div class="container">
        <div class="buttons-container">
          <p class="elapsed-time-text">00:00</p>
            <button type="button" id="start-button" onclick="startStopwatch()">출근</button>
            <button type="button" id="stop-button" onclick="stopStopwatch()">퇴근</button>
        </div>
    </div>
    <script>
        let elapsedTimeText = document.getElementsByClassName("elapsed-time-text")[0];
        let startButton = document.getElementById("start-button");
        let stopButton = document.getElementById("stop-button");

        let elapsedTimeIntervalRef;
        let startTime;

        function startBtn(){
          setStartTime();

          elapsedTimeIntervalRef = setInterval(() => {
            elapsedTimeText.innerText = timeAndDateHandling.getElapsedTime(startTime);
        }, 1000);
        }

        function setStartTime(){
          startTime = new Date();
        }

        function stopBtn(){
          storeElapsedTimeOnPause();
        }

        function storElapsedTimeOnPause(){
          const brokenDownElapsedTime = elapsedTimeText.innerText.split(":");
    
        const brokenDownElapsedTimeAsNumbers = brokenDownElapsedTime.map(numberAsString => parseInt(numberAsString));
    
        elapsedTimeWhenPaused = {
            hours: brokenDownElapsedTimeAsNumbers.length === 3 ? brokenDownElapsedTimeAsNumbers[0] : 0,
            minutes: brokenDownElapsedTimeAsNumbers.length === 3 ? brokenDownElapsedTimeAsNumbers[1] : brokenDownElapsedTimeAsNumbers[0],
            seconds: brokenDownElapsedTimeAsNumbers.length === 3 ? brokenDownElapsedTimeAsNumbers[2] : brokenDownElapsedTimeAsNumbers[1]
        }
        }
        const timeAndDateHandling = {
        getElapsedTime: function (startTime) {
    
            let endTime = new Date();
            let timeDiff = endTime.getTime() - startTime.getTime();
    
            timeDiff = timeDiff / 1000;
    
            let seconds = Math.floor(timeDiff % 60);
            let secondsAsString = seconds < 10 ? "0" + seconds : seconds + "";
    
            timeDiff = Math.floor(timeDiff / 60);
    
            let minutes = timeDiff % 60;
            let minutesAsString = minutes < 10 ? "0" + minutes : minutes + "";
    
            timeDiff = Math.floor(timeDiff / 60);
    
            let hours = timeDiff % 24;
    
            timeDiff = Math.floor(timeDiff / 24);
    
            let days = timeDiff;
    
            let totalHours = hours + (days * 24); // add days to hours
            let totalHoursAsString = totalHours < 10 ? "0" + totalHours : totalHours + "";
    
            if (totalHoursAsString === "00") {
                return minutesAsString + ":" + secondsAsString;
            } else {
                return totalHoursAsString + ":" + minutesAsString + ":" + secondsAsString;
            }
        }
    }


    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>
